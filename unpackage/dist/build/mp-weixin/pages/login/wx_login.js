(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/wx_login"],{"61bd":function(e,t,n){"use strict";n.r(t);var a=n("b026"),o=n("c290");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("8f3d");var s,c=n("f0c5"),d=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"596f3a93",null,!1,a["a"],s);t["default"]=d.exports},"8f3d":function(e,t,n){"use strict";var a=n("938e"),o=n.n(a);o.a},"938e":function(e,t,n){},b026:function(e,t,n){"use strict";var a,o=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}))},c290:function(e,t,n){"use strict";n.r(t);var a=n("fe4e"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},efff:function(e,t,n){"use strict";(function(e){n("238a"),n("921b");a(n("66fd"));var t=a(n("61bd"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},fe4e:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{appid:"wxb1c5d13732280bb4",secret:"811fca80f515f01628c177b26d98034a",session_key:"",type:0,phone:"",phoneParams:{sessionkey:"",ivdata:"",encrypdata:""},loginStatus:!1,phoneStatus:!1,modalName:null,logincode:"",encryptedData:"",rawData:{},iv:""}},onLoad:function(){e.getStorageSync("Myuserid")},methods:{showModal:function(e){this.modalName=e.currentTarget.dataset.target},hideModal:function(t){this.modalName=null,e.showToast({icon:"none",title:"您取消了授权！"})},wxGetUserInfo:function(){console.log(1);var t=this;e.login({provider:"weixin",success:function(n){console.log(n),t.logincode=n.code,e.getUserInfo({provider:"weixin",success:function(e){console.log("111"+JSON.stringify(e)),t.rawData=e.rawData,t.getsessionkey()},fail:function(t){e.switchTab({url:"/pages/index/index"})}})},fail:function(t){e.switchTab({url:"/pages/index/index"})}})},getsessionkey:function(){var t=this,n={code:this.logincode,iv:this.iv,encryptedData:this.encryptedData,rawData:this.rawData,token:"login"};this.$myRequest({url:"wx/login",method:"POST",data:n,hideLoading:!0}).then((function(n){console.log(n,"登录授权得到的值"),200==n.code&&(console.log(n),e.setStorageSync("token",n.data.token),e.setStorageSync("user_id",n.data.id),e.setStorageSync("userimg",n.data.headimgurl),e.setStorageSync("username",n.data.nickname),e.setStorageSync("openid",n.data.openid),e.setStorageSync("mobile",n.data.mobile),e.setStorageSync("hytype",n.data.type),e.setStorageSync("cardnum",n.data.sonnumber),e.setStorageSync("session_key",encodeURIComponent(n.data.sessionKey)),null==n.data.mobile?t.modalName="DialogModal1":(t.modalName="DialogModal2",e.switchTab({url:"../index/index"})))}))},getPhoneNumber:function(t){this.$myRequest({url:"wx/phone",method:"post",hideLoading:!0,data:{id:e.getStorageSync("user_id"),sessionKey:decodeURIComponent(e.getStorageSync("session_key")),encryptedData:t.detail.encryptedData,iv:t.detail.iv}}).then((function(t){console.log("获取手机号得到的值",t),""!=t.phoneNumber&&(e.setStorageSync("mobile",t.phoneNumber),e.switchTab({url:"../index/index"}))})).catch((function(e){}))}}};t.default=n}).call(this,n("543d")["default"])}},[["efff","common/runtime","common/vendor"]]]);