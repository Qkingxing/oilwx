(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/index"],{"18e4":function(t,o,n){},"34e2":function(t,o,n){"use strict";(function(t){n("238a"),n("921b");e(n("66fd"));var o=e(n("c4cb"));function e(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("543d")["createPage"])},"42c4":function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=i(n("66fd"));function i(t){return t&&t.__esModule?t:{default:t}}var c=function(){n.e("colorui/components/shop/shopcart").then(function(){return resolve(n("1feb"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("colorui/components/shop/cartcontrol").then(function(){return resolve(n("e8ef"))}.bind(null,n)).catch(n.oe)},s={data:function(){return{CustomBar:this.CustomBar,title:"Hello",goods:[],windows_height:0,foodSTop:0,currentIndex:0,last:0,right_height:[],select_index:0,left_height:0,left_scroll:0,catrgoryList:[],timeout:null}},components:{shopcart:c,cartcontrol:u},onLoad:function(){var o=this;this.windows_height=Number(t.getSystemInfoSync().windowHeight)-55,setTimeout((function(){o.getHeightList()}),1e3)},onShow:function(){this.getshop()},computed:{getAllCount:function(t){for(var o=this,n=[],i=0,c=function(t){i=0,o.goods[t].treeList.forEach((function(n){n.count>=0&&(i+=n.count,e.default.set(o.goods[t],"count",i))})),n.push(i)},u=0;u<this.goods.length;u++)c(u);return n.sort((function(t,o){return t-o})),i=n[n.length-1],i}},methods:{getshop:function(){var o=this;console.log("进来了");var n={site_id:t.getStorageSync("site_id")};this.$myRequest({url:"customer/query_goods_list",method:"POST",data:n,hideLoading:!0}).then((function(t){console.log(t,"商品"),200==t.code&&(o.goods=t.data)}))},select:function(t){this.currentIndex=t,this.setScrollH(t)},setScrollH:function(o){var n=this,e=0,i=t.createSelectorQuery(),c=i.selectAll(".foods");console.log(c,"----"),this.$nextTick((function(){c.fields({size:!0},(function(t){0==o&&(n.foodSTop=0);for(var i=0;i<o;i++)e+=parseInt(t[i].height),n.foodSTop=e})).exec()}))},addCart:function(t){t.count>=0?(t.count++,this.goods.forEach((function(o){o.foods.forEach((function(o){t.name==o.name&&(o.count=t.count)}))}))):(console.log("add"),this.goods.forEach((function(o){o.foods.forEach((function(o){t.name==o.name&&e.default.set(o,"count",1)}))})))},decreaseCart:function(t){t.count&&(t.count--,this.goods.forEach((function(o){o.foods.forEach((function(o){t.name==o.name&&(o.count=t.count)}))})))},delAll:function(){this.goods.forEach((function(t){t.foods.forEach((function(t){t.count&&(t.count=0)}))}))},getHeightList:function(){var o=this,n=t.createSelectorQuery().in(this);n.select(".left-content").boundingClientRect((function(t){o.left_height=t.height})),n.selectAll(".foods").boundingClientRect((function(t){o.right_height=t.map((function(t){return t.top}))})).exec()},myscroll:function(t){var o=t.detail.scrollHeight-this.windows_height;if(o!=t.detail.scrollTop){var n=t.detail.scrollTop+110,e=+new Date;if(e-this.last>100){this.last=e;var i=this.right_height.findIndex((function(t,o,e){return t<=n&&n<e[o+1]}));if(this.currentIndex=i,this.left_height-this.windows_height){var c=this.left_height-this.windows_height;this.left_scroll=Math.round(i*c/(this.goods.length-1))}}}}}};o.default=s}).call(this,n("543d")["default"])},"81e7":function(t,o,n){"use strict";n.r(o);var e=n("42c4"),i=n.n(e);for(var c in e)"default"!==c&&function(t){n.d(o,t,(function(){return e[t]}))}(c);o["default"]=i.a},8416:function(t,o,n){"use strict";var e=n("18e4"),i=n.n(e);i.a},"90cb":function(t,o,n){"use strict";var e,i=function(){var t=this,o=t.$createElement;t._self._c},c=[];n.d(o,"b",(function(){return i})),n.d(o,"c",(function(){return c})),n.d(o,"a",(function(){return e}))},c4cb:function(t,o,n){"use strict";n.r(o);var e=n("90cb"),i=n("81e7");for(var c in i)"default"!==c&&function(t){n.d(o,t,(function(){return i[t]}))}(c);n("8416");var u,s=n("f0c5"),r=Object(s["a"])(i["default"],e["b"],e["c"],!1,null,"127075a4",null,!1,e["a"],u);o["default"]=r.exports}},[["34e2","common/runtime","common/vendor"]]]);